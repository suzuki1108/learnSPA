{"ast":null,"code":"import _slicedToArray from\"/Users/user/Documents/GitHub/ReactStudy/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/user/Documents/GitHub/ReactStudy/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useEffect}from'react';import{Component,useState}from'react';import AppBar from'@material-ui/core/AppBar';import Button from'@material-ui/core/Button';import BookIcon from'@material-ui/icons/ImportContacts';import Card from'@material-ui/core/Card';import CardMedia from'@material-ui/core/CardMedia';import CssBaseline from'@material-ui/core/CssBaseline';import Grid from'@material-ui/core/Grid';import Toolbar from'@material-ui/core/Toolbar';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import Link from'@material-ui/core/Link';import InputBase from'@material-ui/core/InputBase';import{fade}from'@material-ui/core/styles';import SearchIcon from'@material-ui/icons/Search';import Footer from'./footer';import Modal from'@material-ui/core/Modal';import Backdrop from'@material-ui/core/Backdrop';import Fade from'@material-ui/core/Fade';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Copyright(){return/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\",children:['Copyright © ',/*#__PURE__*/_jsx(Link,{color:\"inherit\",href:\"/\",children:\"MyBookShelf\"}),' ',new Date().getFullYear(),'.']});}var useStyles=makeStyles(function(theme){return{icon:{marginRight:theme.spacing(2)},heroContent:{backgroundColor:theme.palette.background.paper,padding:theme.spacing(8,0,6)},heroButtons:{marginTop:theme.spacing(4)},cardGrid:{paddingTop:theme.spacing(8),paddingBottom:theme.spacing(8)},card:{height:'100%',display:'flex',flexDirection:'column'},cardMedia:{paddingTop:'140%'// 16:9\n},cardContent:{flexGrow:1},footer:{backgroundColor:theme.palette.background.paper,padding:theme.spacing(6)},search:{position:'relative',borderRadius:theme.shape.borderRadius,backgroundColor:fade(theme.palette.common.white,0.15),'&:hover':{backgroundColor:fade(theme.palette.common.white,0.25)},marginLeft:'auto',width:'40%'},searchIcon:{padding:theme.spacing(0,2),height:'100%',position:'absolute',pointerEvents:'none',display:'flex',alignItems:'center',justifyContent:'center'},inputRoot:{color:'inherit'},inputInput:_defineProperty({padding:theme.spacing(1,1,1,0),// vertical padding + font size from searchIcon\npaddingLeft:\"calc(1em + \".concat(theme.spacing(4),\"px)\"),transition:theme.transitions.create('width'),width:'100%'},theme.breakpoints.up('sm'),{width:'12ch','&:focus':{width:'20ch'}}),modal:{maxHeight:'inherit',maxWidth:'inherit',marginRight:'15px',marginLeft:'15px',display:'flex',alignItems:'center',justifyContent:'center',overflowY:'auto'},paper:{backgroundColor:theme.palette.background.paper,border:'2px solid #000',boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)}};});export var userInfo=/*#__PURE__*/React.createContext();export default function MyBookShelf(props){var classes=useStyles();var userId=props.location.state.userId;var userName=props.location.state.userName;//検索結果JSONステート\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//modalステート\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),modalFlg=_useState4[0],setModalFlg=_useState4[1];useEffect(function(){doSearch();},[]);var doSearch=function doSearch(){var userInput={\"userId\":userId};var method=\"POST\";var body=JSON.stringify(userInput);var headers={'Accept':'application/json','Content-Type':'application/json'};fetch(\"https://suzuki-portfolio.herokuapp.com/getMyBookDataAPI\",{method:method,headers:headers,body:body}).then(function(res){return res.json();}).then(function(data){setData(data);}).catch(console.error);};var doDelete=function doDelete(bookId){var book={\"bookId\":bookId};var method=\"POST\";var body=JSON.stringify(book);var headers={'Accept':'application/json','Content-Type':'application/json'};fetch(\"https://suzuki-portfolio.herokuapp.com/deleteBookDataAPI\",{method:method,headers:headers,body:body}).catch(console.error);alert(\"本棚から削除しました。\");doSearch();};var openModal=function openModal(e){setModalFlg(e);};var closeModal=function closeModal(){setModalFlg(\"\");};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(AppBar,{position:\"fixed\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(BookIcon,{className:classes.icon}),/*#__PURE__*/_jsx(Typography,{variant:\"h7\",color:\"inherit\",noWrap:true,children:\"MyBookShelf\"})]})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Container,{className:classes.cardGrid,maxWidth:\"md\",children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:4,children:data.map(function(card){return/*#__PURE__*/_jsxs(Grid,{item:true,xs:6,sm:3,children:[/*#__PURE__*/_jsx(Card,{className:classes.card,children:/*#__PURE__*/_jsx(CardMedia,{className:classes.cardMedia,image:card.imgPath,title:\"Image title\",onClick:function onClick(){return openModal(card.bookTitle);}})}),modalFlg===card.bookTitle?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Modal,{\"aria-labelledby\":\"transition-modal-title\",\"aria-describedby\":\"transition-modal-description\",className:classes.modal,open:true,onClose:closeModal,closeAfterTransition:true,BackdropComponent:Backdrop,BackdropProps:{timeout:500},children:/*#__PURE__*/_jsx(Fade,{in:true,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(\"img\",{src:card.imgPath}),/*#__PURE__*/_jsx(\"h2\",{id:\"transition-modal-title\",children:card.bookTitle}),/*#__PURE__*/_jsx(\"h3\",{children:card.bookTitleKana}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u8457\\u8005\\uFF1A\",card.author]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u4FA1\\u683C\\uFF1A\",card.price,\"\\u5186\"]}),/*#__PURE__*/_jsx(\"p\",{id:\"transition-modal-description\",children:card.description}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(){return doDelete(card.bookId);},children:\"\\u524A\\u9664\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:closeModal,children:\"\\u623B\\u308B\"})]})})})}):null]},card);})})})]}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(userInfo.Provider,{value:userId,children:/*#__PURE__*/_jsx(Footer,{})})]});}","map":{"version":3,"sources":["/Users/user/Documents/GitHub/ReactStudy/app/src/MyBookShelf.js"],"names":["React","useEffect","Component","useState","AppBar","Button","BookIcon","Card","CardMedia","CssBaseline","Grid","Toolbar","Typography","makeStyles","Container","Link","InputBase","fade","SearchIcon","Footer","Modal","Backdrop","Fade","Copyright","Date","getFullYear","useStyles","theme","icon","marginRight","spacing","heroContent","backgroundColor","palette","background","paper","padding","heroButtons","marginTop","cardGrid","paddingTop","paddingBottom","card","height","display","flexDirection","cardMedia","cardContent","flexGrow","footer","search","position","borderRadius","shape","common","white","marginLeft","width","searchIcon","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","breakpoints","up","modal","maxHeight","maxWidth","overflowY","border","boxShadow","shadows","userInfo","createContext","MyBookShelf","props","classes","userId","location","state","userName","data","setData","modalFlg","setModalFlg","doSearch","userInput","method","body","JSON","stringify","headers","fetch","then","res","json","catch","console","error","doDelete","bookId","book","alert","openModal","e","closeModal","map","imgPath","bookTitle","timeout","bookTitleKana","author","price","description"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Component, useState } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport BookIcon from '@material-ui/icons/ImportContacts';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Grid from '@material-ui/core/Grid';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Link from '@material-ui/core/Link';\nimport InputBase from '@material-ui/core/InputBase';\nimport { fade } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Footer from './footer';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\n\nfunction Copyright() {\n    return (\n      <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n        {'Copyright © '}\n        <Link color=\"inherit\" href=\"/\">\n          MyBookShelf\n        </Link>{' '}\n        {new Date().getFullYear()}\n        {'.'}\n      </Typography>\n    );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6),\n  },\n  heroButtons: {\n    marginTop: theme.spacing(4),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    paddingTop: '140%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  footer: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(6),\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 'auto',\n    width: '40%'\n    ,\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: '12ch',\n      '&:focus': {\n        width: '20ch',\n      },\n    },\n  },\n  modal: {\n    maxHeight: 'inherit',\n    maxWidth:'inherit',\n    marginRight:'15px',\n    marginLeft:'15px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    overflowY:'auto',\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport const userInfo = React.createContext();\n\nexport default function MyBookShelf(props) {\n  const classes = useStyles();\n\n  const userId = props.location.state.userId;\n  const userName = props.location.state.userName;\n\n  //検索結果JSONステート\n  const [data ,setData] = useState([]);\n\n  //modalステート\n  const [modalFlg ,setModalFlg] = useState(\"\");\n\n  useEffect(()=>{\n    doSearch();\n  },[])\n\n  const doSearch = () => {\n    const userInput = {\n      \"userId\":userId\n    };\n    const method = \"POST\";\n    const body = JSON.stringify(userInput);\n    const headers = {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    };\n    fetch(\"https://suzuki-portfolio.herokuapp.com/getMyBookDataAPI\", {method, headers, body})\n      .then(res => res.json())\n      .then(data => {\n        setData(data);\n      })\n      .catch(console.error);\n  };\n\n  const doDelete = (bookId) => {\n    const book = {\n      \"bookId\":bookId\n    }\n    const method = \"POST\";\n    const body = JSON.stringify(book);\n    const headers = {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    };\n    fetch(\"https://suzuki-portfolio.herokuapp.com/deleteBookDataAPI\", {method, headers, body})\n      .catch(console.error);\n      alert(\"本棚から削除しました。\");\n      doSearch();\n  };\n\n  const openModal = (e) =>{\n    setModalFlg(e);\n  }\n\n  const closeModal = () =>{\n      setModalFlg(\"\");\n  }\n\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <AppBar position=\"fixed\">\n        <Toolbar>\n          <BookIcon className={classes.icon}/>\n          <Typography variant=\"h7\" color=\"inherit\" noWrap>\n            MyBookShelf\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <main>\n        <br/>\n        <Container className={classes.cardGrid} maxWidth=\"md\">\n          <Grid container spacing={4}>\n            {data.map((card) => (\n              <Grid item key={card} xs={6} sm={3}>\n                <Card className={classes.card}>\n                  <CardMedia\n                    className={classes.cardMedia}\n                    image={card.imgPath}\n                    title=\"Image title\"\n                    onClick={()=>openModal(card.bookTitle)}\n                  />\n                </Card>\n                {modalFlg === card.bookTitle? \n                <div>\n                  <Modal\n                    aria-labelledby=\"transition-modal-title\"\n                    aria-describedby=\"transition-modal-description\"\n                    className={classes.modal}\n                    open={true}\n                    onClose={closeModal}\n                    closeAfterTransition\n                    BackdropComponent={Backdrop}\n                    BackdropProps={{\n                    timeout: 500,\n                    }}\n                  >\n                    <Fade in={true}>\n                    <div className={classes.paper}>\n                        <img src={card.imgPath}></img>\n                        <h2 id=\"transition-modal-title\">{card.bookTitle}</h2>\n                        <h3>{card.bookTitleKana}</h3>\n                        <h3>著者：{card.author}</h3>\n                        <h3>価格：{card.price}円</h3>\n                        <p id=\"transition-modal-description\">{card.description}</p>\n                          <Button variant=\"contained\" color=\"secondary\" onClick={() => doDelete(card.bookId)}>削除</Button>\n                          <Button variant=\"contained\" onClick={closeModal}>戻る</Button>\n                    </div>\n                    </Fade>\n                  </Modal>\n                </div>\n                :null}\n              </Grid>\n            ))}\n          </Grid>\n        </Container>\n      </main>\n      <Footer/>\n      <userInfo.Provider value={userId}>\n        <Footer/>\n      </userInfo.Provider>\n      {/* Footer */}\n      {/* <footer className={classes.footer}>\n        <Typography variant=\"h6\" align=\"center\" gutterBottom>\n          MyBookShelf ver.2.0\n        </Typography>\n        <Copyright />\n      </footer> */}\n      {/* End footer */}\n    </React.Fragment>\n  );\n}"]},"metadata":{},"sourceType":"module"}