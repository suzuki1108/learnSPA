{"ast":null,"code":"import _slicedToArray from\"/Users/user/Documents/GitHub/ReactStudy/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/user/Documents/GitHub/ReactStudy/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React from'react';import{Component,useState,useContext}from'react';import{useHistory}from'react-router-dom';import AppBar from'@material-ui/core/AppBar';import Button from'@material-ui/core/Button';import BookIcon from'@material-ui/icons/ImportContacts';import Card from'@material-ui/core/Card';import CardActions from'@material-ui/core/CardActions';import CardContent from'@material-ui/core/CardContent';import CardMedia from'@material-ui/core/CardMedia';import CssBaseline from'@material-ui/core/CssBaseline';import Grid from'@material-ui/core/Grid';import Toolbar from'@material-ui/core/Toolbar';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import Link from'@material-ui/core/Link';import InputBase from'@material-ui/core/InputBase';import{fade}from'@material-ui/core/styles';import SearchIcon from'@material-ui/icons/Search';import Footer from'./footer';import Modal from'@material-ui/core/Modal';import Backdrop from'@material-ui/core/Backdrop';import Fade from'@material-ui/core/Fade';import{userInfo}from'./MyBookShelf';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Copyright(){return/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\",children:['Copyright © ',/*#__PURE__*/_jsx(Link,{color:\"inherit\",href:\"/\",children:\"MyBookShelf\"}),' ',new Date().getFullYear(),'.']});}var useStyles=makeStyles(function(theme){return{icon:{marginRight:theme.spacing(2)},heroContent:{backgroundColor:theme.palette.background.paper,padding:theme.spacing(8,0,6)},heroButtons:{marginTop:theme.spacing(4)},cardGrid:{paddingTop:theme.spacing(8),paddingBottom:theme.spacing(8)},card:{height:'100%',display:'flex',flexDirection:'column'},cardMedia:{paddingTop:'140%'// 16:9\n},cardContent:{flexGrow:1},footer:{backgroundColor:theme.palette.background.paper,padding:theme.spacing(6)},search:{position:'relative',borderRadius:theme.shape.borderRadius,backgroundColor:fade(theme.palette.common.white,0.15),'&:hover':{backgroundColor:fade(theme.palette.common.white,0.25)},marginLeft:'auto',width:'40%'},searchIcon:{padding:theme.spacing(0,2),height:'100%',position:'absolute',pointerEvents:'none',display:'flex',alignItems:'center',justifyContent:'center'},inputRoot:{color:'inherit'},inputInput:_defineProperty({padding:theme.spacing(1,1,1,0),// vertical padding + font size from searchIcon\npaddingLeft:\"calc(1em + \".concat(theme.spacing(4),\"px)\"),transition:theme.transitions.create('width'),width:'100%'},theme.breakpoints.up('sm'),{width:'12ch','&:focus':{width:'20ch'}}),modal:{maxHeight:'inherit',maxWidth:'inherit',marginRight:'15px',marginLeft:'15px',display:'flex',alignItems:'center',justifyContent:'center',overflowY:'auto'},paper:{backgroundColor:theme.palette.background.paper,border:'2px solid #000',boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)}};});export default function Search(props){var classes=useStyles();var userId=props.location.state.userId;//検索ワードステート\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchWord=_useState2[0],setSearchWord=_useState2[1];//検索結果JSONステート\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];//modalステート\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),modalFlg=_useState6[0],setModalFlg=_useState6[1];var searchWordChange=function searchWordChange(e){var word=e.target.value;setSearchWord(word);};var doSearch=function doSearch(e){console.log(userId);var uri=\"https://app.rakuten.co.jp/services/api/BooksBook/Search/20170404?format=json&title=\".concat(searchWord,\"&applicationId=1043481609307048393\");var method=\"GET\";fetch(uri,{method:method}).then(function(res){return res.json();}).then(function(data){setData(data.Items);}).catch(console.error);e.preventDefault();};var saveBook=function saveBook(bookData){var userInput={\"bookTitle\":bookData.title,\"bookTitleKana\":bookData.titleKana,\"author\":bookData.author,\"salesDate\":bookData.salesDate,\"imgPath\":bookData.largeImageUrl,\"description\":bookData.itemCaption,\"userId\":userId};var method=\"POST\";var body=JSON.stringify(userInput);var headers={'Accept':'application/json','Content-Type':'application/json'};fetch(\"https://suzuki-portfolio.herokuapp.com/saveBookDataAPI\",{method:method,headers:headers,body:body}).catch(console.error);closeModal();alert(\"MyBooksに追加しました\");};var openModal=function openModal(e){setModalFlg(e);};var closeModal=function closeModal(){setModalFlg(\"\");};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(AppBar,{position:\"fixed\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(BookIcon,{className:classes.icon}),/*#__PURE__*/_jsx(Typography,{variant:\"h7\",color:\"inherit\",noWrap:true,children:\"MyBookShelf\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.search,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.searchIcon,children:/*#__PURE__*/_jsx(SearchIcon,{})}),/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){return doSearch(e);},children:/*#__PURE__*/_jsx(InputBase,{placeholder:\"\\u672C\\u3092\\u691C\\u7D22\",classes:{root:classes.inputRoot,input:classes.inputInput},inputProps:{'aria-label':'search'},onChange:function onChange(e){return searchWordChange(e);},id:\"search\"})})]})]})}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(Container,{className:classes.cardGrid,maxWidth:\"md\",children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:4,children:data.map(function(card){return/*#__PURE__*/_jsxs(Grid,{item:true,xs:6,sm:3,children:[/*#__PURE__*/_jsx(Card,{className:classes.card,children:/*#__PURE__*/_jsx(CardMedia,{className:classes.cardMedia,image:card.Item.largeImageUrl,title:\"Image title\",onClick:function onClick(){return openModal(card.Item.title);}})}),modalFlg===card.Item.title?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Modal,{\"aria-labelledby\":\"transition-modal-title\",\"aria-describedby\":\"transition-modal-description\",className:classes.modal,open:true,onClose:closeModal,closeAfterTransition:true,BackdropComponent:Backdrop,BackdropProps:{timeout:500},children:/*#__PURE__*/_jsx(Fade,{in:true,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(\"img\",{src:card.Item.largeImageUrl}),/*#__PURE__*/_jsx(\"h2\",{id:\"transition-modal-title\",children:card.Item.title}),/*#__PURE__*/_jsx(\"h3\",{children:card.Item.titleKana}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u8457\\u8005\\uFF1A\",card.Item.author]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u4FA1\\u683C\\uFF1A\",card.Item.itemPrice,\"\\u5186\"]}),/*#__PURE__*/_jsx(\"p\",{id:\"transition-modal-description\",children:card.Item.itemCaption}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){return saveBook(card.Item);},children:\"\\u8FFD\\u52A0\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:closeModal,children:\"\\u623B\\u308B\"})]})})})}):null]},card);})})})}),/*#__PURE__*/_jsx(userInfo.Provider,{value:userId,children:/*#__PURE__*/_jsx(Footer,{})})]});}","map":{"version":3,"sources":["/Users/user/Documents/GitHub/ReactStudy/app/src/Search.js"],"names":["React","Component","useState","useContext","useHistory","AppBar","Button","BookIcon","Card","CardActions","CardContent","CardMedia","CssBaseline","Grid","Toolbar","Typography","makeStyles","Container","Link","InputBase","fade","SearchIcon","Footer","Modal","Backdrop","Fade","userInfo","Copyright","Date","getFullYear","useStyles","theme","icon","marginRight","spacing","heroContent","backgroundColor","palette","background","paper","padding","heroButtons","marginTop","cardGrid","paddingTop","paddingBottom","card","height","display","flexDirection","cardMedia","cardContent","flexGrow","footer","search","position","borderRadius","shape","common","white","marginLeft","width","searchIcon","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","breakpoints","up","modal","maxHeight","maxWidth","overflowY","border","boxShadow","shadows","Search","props","classes","userId","location","state","searchWord","setSearchWord","data","setData","modalFlg","setModalFlg","searchWordChange","e","word","target","value","doSearch","console","log","uri","method","fetch","then","res","json","Items","catch","error","preventDefault","saveBook","bookData","userInput","title","titleKana","author","salesDate","largeImageUrl","itemCaption","body","JSON","stringify","headers","closeModal","alert","openModal","root","input","map","Item","timeout","itemPrice"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Component, useState,useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport BookIcon from '@material-ui/icons/ImportContacts';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Grid from '@material-ui/core/Grid';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Link from '@material-ui/core/Link';\nimport InputBase from '@material-ui/core/InputBase';\nimport { fade } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Footer from './footer';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport {userInfo} from './MyBookShelf';\n\nfunction Copyright() {\n    return (\n      <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n        {'Copyright © '}\n        <Link color=\"inherit\" href=\"/\">\n          MyBookShelf\n        </Link>{' '}\n        {new Date().getFullYear()}\n        {'.'}\n      </Typography>\n    );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6),\n  },\n  heroButtons: {\n    marginTop: theme.spacing(4),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    paddingTop: '140%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  footer: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(6),\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 'auto',\n    width: '40%'\n    ,\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: '12ch',\n      '&:focus': {\n        width: '20ch',\n      },\n    },\n  },\n  modal: {\n    maxHeight: 'inherit',\n    maxWidth:'inherit',\n    marginRight:'15px',\n    marginLeft:'15px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    overflowY:'auto',\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default function Search(props) {\n  const classes = useStyles();\n\n  const userId = props.location.state.userId;\n\n  //検索ワードステート\n  const[searchWord,setSearchWord] = useState(\"\");\n\n  //検索結果JSONステート\n  const [data ,setData] = useState([]);\n\n  //modalステート\n  const [modalFlg ,setModalFlg] = useState(\"\");\n\n  let searchWordChange = (e) =>{\n    let word = e.target.value;\n    setSearchWord(word);\n  };\n\n  const doSearch = (e) => {\n    console.log(userId);\n    let uri = `https://app.rakuten.co.jp/services/api/BooksBook/Search/20170404?format=json&title=${searchWord}&applicationId=1043481609307048393`\n    const method = \"GET\";\n    fetch(uri, {method})\n      .then(res => res.json())\n      .then(data => {\n          setData(data.Items);\n      })\n      .catch(console.error);\n      e.preventDefault();\n  };\n\n  const saveBook = (bookData) => {\n  const userInput = {\n      \"bookTitle\" :bookData.title,\n      \"bookTitleKana\":bookData.titleKana,\n      \"author\":bookData.author,\n      \"salesDate\":bookData.salesDate,\n      \"imgPath\":bookData.largeImageUrl,\n      \"description\":bookData.itemCaption,\n      \"userId\": userId\n  };\n  const method = \"POST\";\n  const body = JSON.stringify(userInput);\n  const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json'\n  };\n  fetch(\"https://suzuki-portfolio.herokuapp.com/saveBookDataAPI\", {method, headers, body})\n    .catch(console.error);\n    closeModal();\n    alert(\"MyBooksに追加しました\");\n  }\n\n  const openModal = (e) =>{\n    setModalFlg(e);\n  }\n\n  const closeModal = () =>{\n    setModalFlg(\"\");\n  }\n\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <AppBar position=\"fixed\">\n        <Toolbar>\n          <BookIcon className={classes.icon} />\n          <Typography variant=\"h7\" color=\"inherit\" noWrap>\n            MyBookShelf\n          </Typography>\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <SearchIcon />\n            </div>\n            <form onSubmit={e=>doSearch(e)}>\n            <InputBase\n              placeholder=\"本を検索\"\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              inputProps={{ 'aria-label': 'search' }}\n              onChange={e=>searchWordChange(e)}\n              id={\"search\"}\n            />\n            </form>\n          </div>\n        </Toolbar>\n      </AppBar>\n      <main>\n        <Container className={classes.cardGrid} maxWidth=\"md\">\n          {/* End hero unit */}\n          <Grid container spacing={4}>\n            {data.map((card) => (\n              <Grid item key={card} xs={6} sm={3}>\n                <Card className={classes.card}>\n                  <CardMedia\n                    className={classes.cardMedia}\n                    image={card.Item.largeImageUrl}\n                    title=\"Image title\"\n                    onClick={()=>openModal(card.Item.title)}\n                  />\n                </Card>\n                {modalFlg === card.Item.title? \n                <div>\n                  <Modal\n                    aria-labelledby=\"transition-modal-title\"\n                    aria-describedby=\"transition-modal-description\"\n                    className={classes.modal}\n                    open={true}\n                    onClose={closeModal}\n                    closeAfterTransition\n                    BackdropComponent={Backdrop}\n                    BackdropProps={{\n                    timeout: 500,\n                    }}\n                  >\n                    <Fade in={true}>\n                    <div className={classes.paper}>\n                        <img src={card.Item.largeImageUrl}></img>\n                        <h2 id=\"transition-modal-title\">{card.Item.title}</h2>\n                        <h3>{card.Item.titleKana}</h3>\n                        <h3>著者：{card.Item.author}</h3>\n                        <h3>価格：{card.Item.itemPrice}円</h3>\n                        <p id=\"transition-modal-description\">{card.Item.itemCaption}</p>\n                          <Button variant=\"contained\" color=\"primary\" onClick={()=>saveBook(card.Item)}>追加</Button>\n                          <Button variant=\"contained\" onClick={closeModal}>戻る</Button>\n                    </div>\n                    </Fade>\n                  </Modal>\n                </div>\n                :null}\n              </Grid>\n            ))}\n          </Grid>\n        </Container>\n      </main>\n      <userInfo.Provider value={userId}>\n      <Footer/>\n      </userInfo.Provider>\n      {/* Footer */}\n      {/* <footer className={classes.footer}>\n        <Typography variant=\"h6\" align=\"center\" gutterBottom>\n          MyBookShelf ver.2.0\n        </Typography>\n        <Copyright />\n      </footer> */}\n      {/* End footer */}\n    </React.Fragment>\n  );\n}"]},"metadata":{},"sourceType":"module"}