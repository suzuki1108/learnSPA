{"ast":null,"code":"var _jsxFileName = \"/Users/user/Documents/GitHub/ReactStudy/app/src/SignInSide.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Component, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Copyright() {\n  return /*#__PURE__*/_jsxDEV(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    children: ['Copyright © ', /*#__PURE__*/_jsxDEV(Link, {\n      color: \"inherit\",\n      href: \"/\",\n      children: \"MyBookShelf\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }, this), ' ', new Date().getFullYear(), '.']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 7\n  }, this);\n}\n\n_c = Copyright;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100vh'\n  },\n  image: {\n    backgroundImage: `url(/favicon.ico)`,\n    backgroundRepeat: 'no-repeat',\n    backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center'\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\nexport default function SignInSide() {\n  _s();\n\n  const classes = useStyles(); //userID形式チェック正規表現\n\n  const userIdReg = /^[a-z\\d]{8,15}$/i; //password形式チェック正規表現（英数字8〜15文字）\n\n  const passwordReg = /^(?=.*?[a-z])(?=.*?\\d)[a-z\\d]{8,15}$/i; //API通信メッセージ\n\n  const [apiMsg, setApiMsg] = useState(\"\"); //UserID関連のステート\n\n  const [userId, setUserId] = useState(\"\");\n  const [userIdMsg, setUserIdMsg] = useState(\"UserID\");\n  const [userIdCheckFlg, setUserIdCheckFlg] = useState(false); //password関連のステート\n\n  const [password, setPassword] = useState(\"\");\n  const [passwordMsg, setPasswordMsg] = useState(\"Password\");\n  const [passwordCheckFlg, setPasswordCheckFlg] = useState(false); //userName(hidden)ステート\n\n  const [userName, setUserName] = useState(\"\"); //SubmitButton非活性処理\n\n  const [disabledFlg, setDisabledFlg] = useState(false);\n  useEffect(() => {\n    passwordCheckFlg && userIdCheckFlg ? setDisabledFlg(false) : setDisabledFlg(true);\n  }); //画面遷移ハンドラ\n\n  const history = useHistory();\n\n  const handleLink = path => history.push({\n    pathname: path,\n    state: {\n      \"password\": password,\n      \"loginId\": userId,\n      \"userName\": userName\n    }\n  });\n\n  let userIdOnChange = e => {\n    let userId = e.target.value; //空文字・null・15文字以内・email形式のバリデーションチェック\n\n    if (userId === \"\" || userId === null) {\n      setUserIdMsg(\"UserID\");\n      setUserIdCheckFlg(false);\n    } else if (userId.length <= 15 && userIdReg.test(userId)) {\n      setUserIdMsg(\"UserID\");\n      setUserId(userId);\n      setUserIdCheckFlg(true);\n    } else {\n      setUserIdMsg(\"半角英数字8〜15文字で入力してください\");\n      setUserIdCheckFlg(false);\n    }\n  };\n\n  let passwordOnChange = e => {\n    let password = e.target.value; //空文字・null・15文字以内・password形式のバリデーションチェック\n\n    if (password === \"\" || password === null) {\n      setPasswordMsg(\"Password\");\n      setPasswordCheckFlg(false);\n    } else if (password.length <= 15 && passwordReg.test(password)) {\n      setPasswordMsg(\"Password\");\n      setPassword(password);\n      setPasswordCheckFlg(true);\n    } else {\n      setPasswordMsg(\"半角英数字8〜15文字で入力してください\");\n      setPasswordCheckFlg(false);\n    }\n  }; //API呼び出し→アカウント作成→画面遷移\n\n\n  let check = () => {\n    const userInput = {\n      \"passWord\": password,\n      \"loginId\": userId\n    };\n    const method = \"POST\";\n    const body = JSON.stringify(userInput);\n    const headers = {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    };\n    fetch(\"http://localhost:8080/loginAPI\", {\n      method,\n      headers,\n      body\n    }).then(res => res.json()).then(data => {\n      setApiMsg(data.message);\n\n      if (data.result) {\n        setUserName(data.userName);\n        handleLink('/MyBookShelf');\n      }\n    }).catch(console.error);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    component: \"main\",\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: false,\n      sm: 4,\n      md: 7,\n      className: classes.image\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      sm: 8,\n      md: 5,\n      component: Paper,\n      elevation: 6,\n      square: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.paper,\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          className: classes.avatar,\n          children: /*#__PURE__*/_jsxDEV(LockOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h1\",\n          variant: \"h5\",\n          children: \"MyBookShelf\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h2\",\n          variant: \"h5\",\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"error\",\n          align: \"center\",\n          children: apiMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          id: \"userId\",\n          label: userIdMsg,\n          name: \"userId\",\n          autoComplete: \"userId\",\n          inputProps: {\n            maxLength: 15\n          },\n          onChange: e => userIdOnChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          name: \"password\",\n          label: passwordMsg,\n          type: \"text\",\n          id: \"password\",\n          autoComplete: \"current-password\",\n          inputProps: {\n            maxLength: 20\n          },\n          onChange: e => passwordOnChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.submit,\n          disabled: disabledFlg,\n          onClick: () => check(),\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              href: \"/SignUp\",\n              variant: \"body2\",\n              children: \"アカウントをお持ちでない場合： アカウント作成\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          mt: 5,\n          children: /*#__PURE__*/_jsxDEV(Copyright, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SignInSide, \"OmVER4taXTirqS1e0JQDZN1HW2M=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c2 = SignInSide;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Copyright\");\n$RefreshReg$(_c2, \"SignInSide\");","map":{"version":3,"sources":["/Users/user/Documents/GitHub/ReactStudy/app/src/SignInSide.js"],"names":["React","useEffect","Component","useState","useHistory","Avatar","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Link","Paper","Box","Grid","LockOutlinedIcon","Typography","makeStyles","Copyright","Date","getFullYear","useStyles","theme","root","height","image","backgroundImage","backgroundRepeat","backgroundColor","palette","type","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","avatar","secondary","main","form","width","marginTop","submit","SignInSide","classes","userIdReg","passwordReg","apiMsg","setApiMsg","userId","setUserId","userIdMsg","setUserIdMsg","userIdCheckFlg","setUserIdCheckFlg","password","setPassword","passwordMsg","setPasswordMsg","passwordCheckFlg","setPasswordCheckFlg","userName","setUserName","disabledFlg","setDisabledFlg","history","handleLink","path","push","pathname","state","userIdOnChange","e","target","value","length","test","passwordOnChange","check","userInput","method","body","JSON","stringify","headers","fetch","then","res","json","data","message","result","catch","console","error","maxLength"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Component, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nfunction Copyright() {\n    return (\n      <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n        {'Copyright © '}\n        <Link color=\"inherit\" href=\"/\">\n          MyBookShelf\n        </Link>{' '}\n        {new Date().getFullYear()}\n        {'.'}\n      </Typography>\n    );\n  }\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100vh',\n  },\n  image: {\n    backgroundImage:`url(/favicon.ico)`,\n    backgroundRepeat: 'no-repeat',\n    backgroundColor:\n      theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignInSide() {\n  const classes = useStyles();\n\n  //userID形式チェック正規表現\n  const userIdReg = /^[a-z\\d]{8,15}$/i;\n  //password形式チェック正規表現（英数字8〜15文字）\n  const passwordReg = /^(?=.*?[a-z])(?=.*?\\d)[a-z\\d]{8,15}$/i;\n\n  //API通信メッセージ\n  const[apiMsg, setApiMsg] = useState(\"\");\n\n  //UserID関連のステート\n  const[userId, setUserId] = useState(\"\");\n  const[userIdMsg, setUserIdMsg] = useState(\"UserID\");\n  const[userIdCheckFlg, setUserIdCheckFlg] = useState(false);\n\n  //password関連のステート\n  const[password, setPassword] = useState(\"\");\n  const[passwordMsg, setPasswordMsg] = useState(\"Password\");\n  const[passwordCheckFlg, setPasswordCheckFlg] = useState(false);\n\n  //userName(hidden)ステート\n  const[userName, setUserName] = useState(\"\");\n\n  //SubmitButton非活性処理\n  const[disabledFlg, setDisabledFlg] = useState(false);\n  useEffect(()=>{\n    passwordCheckFlg && userIdCheckFlg ? setDisabledFlg(false) : setDisabledFlg(true);\n  });\n\n  //画面遷移ハンドラ\n  const history = useHistory();\n  const handleLink = path => history.push(\n    {pathname: path, state: {\"password\" :password,\"loginId\":userId,\"userName\":userName}}\n  );\n\n  let userIdOnChange = (e) =>{\n    let userId = e.target.value;\n    //空文字・null・15文字以内・email形式のバリデーションチェック\n    if(userId === \"\" || userId === null){\n        setUserIdMsg(\"UserID\");\n        setUserIdCheckFlg(false);\n    }else if(userId.length <= 15 && userIdReg.test(userId)){\n        setUserIdMsg(\"UserID\");\n        setUserId(userId);\n        setUserIdCheckFlg(true);\n    }else{\n        setUserIdMsg(\"半角英数字8〜15文字で入力してください\");\n        setUserIdCheckFlg(false);\n    }\n  }\n\n  let passwordOnChange = (e) =>{\n    let password = e.target.value;\n    //空文字・null・15文字以内・password形式のバリデーションチェック\n    if(password === \"\" || password === null){\n        setPasswordMsg(\"Password\");\n        setPasswordCheckFlg(false);\n    }else if(password.length <= 15 && passwordReg.test(password)){\n        setPasswordMsg(\"Password\");\n        setPassword(password);\n        setPasswordCheckFlg(true);\n    }else{\n        setPasswordMsg(\"半角英数字8〜15文字で入力してください\");\n        setPasswordCheckFlg(false);\n    }\n  }\n\n  //API呼び出し→アカウント作成→画面遷移\n  let check = () =>{\n    const userInput = {\n        \"passWord\" :password,\n        \"loginId\":userId\n    };\n    const method = \"POST\";\n    const body = JSON.stringify(userInput);\n    const headers = {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    };\n    fetch(\"http://localhost:8080/loginAPI\", {method, headers, body})\n      .then(res => res.json())\n      .then(data => {\n        setApiMsg(data.message);\n        if(data.result){\n            setUserName(data.userName);\n\t\t\thandleLink('/MyBookShelf');\n        }\n      })\n      .catch(console.error);\n  }\n\n  return (\n    <Grid container component=\"main\" className={classes.root}>\n      <CssBaseline />\n      <Grid item xs={false} sm={4} md={7} className={classes.image} />\n      <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n        <div className={classes.paper}>\n          <Avatar className={classes.avatar}>\n            <LockOutlinedIcon />\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">\n            MyBookShelf\n          </Typography>\n          <Typography component=\"h2\" variant=\"h5\">\n            Sign in\n          </Typography>\n          <Typography variant=\"body2\" color=\"error\" align=\"center\">\n              {apiMsg}\n          </Typography>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"userId\"\n                label={userIdMsg}\n                name=\"userId\"\n                autoComplete=\"userId\"\n                inputProps={{ maxLength: 15 }}\n                onChange={e => userIdOnChange(e)}\n              />\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                name=\"password\"\n                label={passwordMsg}\n                type=\"text\"\n                id=\"password\"\n                autoComplete=\"current-password\"\n                inputProps={{ maxLength: 20 }}\n                onChange={e => passwordOnChange(e)}\n              />\n            <Button\n            type=\"button\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            disabled={disabledFlg}\n            onClick = {() => check()}\n            >\n            Sign In\n          </Button>\n            <Grid container>\n              <Grid item>\n                <Link href=\"/SignUp\" variant=\"body2\">\n                  {\"アカウントをお持ちでない場合： アカウント作成\"}\n                </Link>\n              </Grid>\n            </Grid>\n            <Box mt={5}>\n              <Copyright />\n            </Box>\n        </div>\n      </Grid>\n    </Grid>\n  );\n}"]},"metadata":{},"sourceType":"module"}